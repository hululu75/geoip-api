version: '3.8'

services:
  geoip-api:
    # Option 1: Build locally
    build: .
    # Option 2: Use pre-built image from GitHub Container Registry
    # image: ghcr.io/hululu75/geoip-api:latest
    container_name: geoip-api
    restart: unless-stopped
    ports:
      - "${HOST_PORT:-8080}:${CONTAINER_PORT:-8080}"
    volumes:
      - ${GEOIP_DB_DIR:-./data}:/data:ro
    environment:
      - PORT=${CONTAINER_PORT:-8080}
      - GEOIP_DB_PATH=/data/${GEOIP_DB_FILENAME:-GeoLite2-Country.mmdb}
      - TZ=${TZ:-UTC}
