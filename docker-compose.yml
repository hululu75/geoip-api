version: '3.8'

services:
  geoip-api:
    # Option 1: Build locally
    build: .
    # Option 2: Use pre-built image from GitHub Container Registry
    # image: ghcr.io/hululu75/geoip-api:latest
    container_name: geoip-api
    restart: unless-stopped
    ports:
      - "${HOST_PORT:-8080}:${CONTAINER_PORT:-8080}"
    volumes:
      - ${GEOIP_DB_HOST_PATH}:${GEOIP_DB_PATH:-/data/GeoLite2-Country.mmdb}:ro
    environment:
      - PORT=${CONTAINER_PORT:-8080}
      - GEOIP_DB_PATH=${GEOIP_DB_PATH:-/data/GeoLite2-Country.mmdb}
